<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:jsf="http://xmlns.jcp.org/jsf"
  template="/WEB-INF/templates/flex-main-functionality.xhtml">
  
  <ui:param name="activeTrail" value="coursepicker"/>
  
  <ui:define name="scripts">
    <script defer="defer" type="text/javascript" src="#{request.contextPath}/JavaScriptLocales?lang=#{muikkuSession.locale}"/>
    <script defer="defer" jsf:name="/scripts/gui/locales.js"/>
    <script defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/dustjs-linkedin/2.7.1/dust-full.min.js"/>
    <script defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/dustjs-helpers/1.7.1/dust-helpers.min.js"/>
    <script defer="defer" jsf:name="/scripts/gui/dustloader.js"/>
    
    <script defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery.klass/0.1a/jquery.klass-0.1a.js"/>
    <script defer="defer" jsf:name="/scripts/gui/widgetcontroller.js"/> 
    <script defer="defer" jsf:name="/scripts/gui/coursepicker.js"/>
    <script defer="defer" jsf:name="/scripts/gui/workspace-copy-wizard.js"/>
    
    <ui:fragment rendered="#{!sessionBackingBean.loggedIn}">
      <script defer="defer" jsf:name="/scripts/gui/login.js"/>
    </ui:fragment>
    
  </ui:define>
  
  <ui:define name="main-functionality-styles">
    <link rel="stylesheet" type="text/css" href="/css/workspaces-copy-wizard.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.muikkuverkko.fi/libs/jquery.perfect-scrollbar/0.6.5/css/perfect-scrollbar.min.css"/>
  </ui:define>  

  <ui:define name="mf-button-container">
    <div class="bt-main-functionality">
      <div class="bt-main-functionality-content"><span id="btnValue"></span><span class="bt-main-functionality-decoration icon-arrow-down"></span></div>             
    </div>
    <div class="cp-side-button-dropdown">
      <ul id="cpCategories">
        <li id="cat-1" ><span id="all" class="cp-category-allCourses">#{i18n.text['plugin.coursepicker.allcourses']}</span></li>
        <ui:fragment rendered="#{muikkuSession.loggedIn}">
          <li id="cat-2"><span id="my" class="cp-category-myCourses">#{i18n.text['plugin.coursepicker.owncourses']}</span></li>
          <ui:fragment rendered="#{sessionBackingBean.teacherLoggedIn || sessionBackingBean.managerLoggedIn || sessionBackingBean.administratorLoggedIn}">
            <li id="cat-4"><span id="te" class="cp-category-teacherCourses">#{i18n.text['plugin.coursepicker.teachercourses']}</span></li>
          </ui:fragment>
        </ui:fragment>                 
      </ul>
    </div>
  </ui:define>  
  
  <ui:define name="mf-controls-container">
    <div class="cp-content-functions">
      <div class="cp-search">
        <div class="cp-search-field"> 
         <span id="testResult"></span>
          <input type="text" class="search" name="coursePickerSearch"/>
        </div>
      </div>
    </div>
  </ui:define>
    
  <ui:define name="mf-content-area-instance">
    <div class="cp-content-main flex-row">
      <div id="coursesList" class="lg-flex-cell-full md-flex-cell-full sm-flex-cell-full sm-flex-order-1"></div>
      <div class="mf-items-paging lg-flex-cell-full md-flex-cell-full sm-flex-cell-full sm-flex-order-2">
        <div class="mf-paging-toolbar">
          <div class="mf-paging-tool mf-page-link-load-more cp-page-link-load-more">#{i18n.text['plugin.coursepicker.more']}</div>
        </div>
      </div>            
    </div>
  </ui:define>

</ui:composition>
