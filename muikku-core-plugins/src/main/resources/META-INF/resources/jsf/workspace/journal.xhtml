<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"  
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  template="./templates/workspace-journal-view.xhtml">
  
  <ui:define name="workspace.content.top.static">
    <div class="workspace-journal-new-entry-container" style="height:auto;">
	    <h:form id="newJournalEntryForm">
	      <h:outputLabel id="newJournalEntryTitle" value="#{i18n.text['plugin.workspace.journal.newEntryTitle.label']}" />
	      <h:inputText value="#{workspaceJournalBackingBean.workspaceJournalEntryTitle}" />
	      <h:outputLabel id="newJournalEntryContent" value="#{i18n.text['plugin.workspace.journal.newEntryContent.label']}" />
          <h:inputTextarea id="newJournalEntryContentField" value="#{workspaceJournalBackingBean.workspaceJournalEntryHtml}" />
	      <h:commandButton class="workspace-journal-new-entry-button" action="#{workspaceJournalBackingBean.addWorkspaceJournalEntry()}" value="#{i18n.text['plugin.workspace.journal.newEntryButton.label']}" />
	    </h:form>
	    <script>CKEDITOR.replace("newJournalEntryForm:newJournalEntryContentField");</script>
    </div>
  </ui:define>
  
  <ui:define name="workspace.content">
    <div class="workspace-journal-content-wrapper">
    <ui:repeat var="entry" value="#{workspaceJournalBackingBean.journalEntries}">
    
      <!-- Start of da Loopa-Loop for single journal entry -->
      <div class="workspace-single-journal-entry">
        <div class="workspace-journal-title">#{entry.title}</div>
        <div class="workspace-journal-entry-meta">
          <div class="workspace-journal-dateTime">12.6.2015</div>
        </div>
        <div class="workspace-journal-content">
          <p><h:outputText value="#{entry.html}" escape="false"/></p>
        </div>
        <div class="workspace-journal-footer">
        <ui:remove>
          <button class="journal-edit-button">#{i18n.text['plugin.workspace.journal.editEntryButton.label']}</button>
          <button class="journal-delete-button">#{i18n.text['plugin.workspace.journal.deleteEntryButton.label']}</button>
          <button class="journal-permanent-url-button">#{i18n.text['plugin.workspace.journal.copyUrlEntryButton.label']}</button>
        </ui:remove>
        </div>
      </div>
      
    </ui:repeat>
    </div>
  </ui:define>
  
</ui:composition>
