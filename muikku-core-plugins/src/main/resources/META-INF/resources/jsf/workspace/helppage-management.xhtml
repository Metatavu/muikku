<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
  xmlns:composite="http://java.sun.com/jsf/composite/composite"
  template="/jsf/workspace/templates/workspace-materials-management-view.xhtml">

  <ui:define name="workspaces.materials.management.toc">
  </ui:define>

  <ui:define name="workspace.materials.management.content">
    <div class="workspace-materials-management-add">
      <span class="workspace-materials-management-line-separator"></span><a
        class="workspaces-materials-management-add icon-add" href="javascript:void(null)"><span>#{i18n.text['plugin.workspace.materialsManagement.add']}</span></a>
    </div>
    <div class="workspaces-materials-management-insert-file">
      <input type="file" />
    </div>
    <ui:repeat var="node" value="#{workspaceHelpPageManagementBackingBean.contentNodes}">
      <ui:fragment rendered="#{node.type eq 'folder'}">
        <section id="page-#{node.workspaceMaterialId}"
          data-workspace-material-id="#{node.workspaceMaterialId}"
          data-material-id="#{node.materialId}"
          data-parent-id="#{node.parentId}"
          data-material-type="#{node.type}"
          data-material-title="#{node.title}"
          class="workspace-materials-view-page material-management-view folder #{node.hidden ? 'item-hidden' : ''}"></section>

        <div class="workspace-materials-management-add">
          <span class="workspace-materials-management-line-separator"></span><a
            class="workspaces-materials-management-add icon-add" href="javascript:void(null)"><span>#{i18n.text['plugin.workspace.materialsManagement.add']}</span></a>
        </div>
        <div class="workspaces-materials-management-insert-file">
          <input type="file" />
        </div>

        <ui:repeat var="articleNode" value="#{node.children}">
          <ui:fragment rendered="#{articleNode.type eq 'folder'}">
            <h2 id="page-#{articleNode.workspaceMaterialId}"
              data-workspace-material-id="#{articleNode.workspaceMaterialId}"
              data-material-id="#{articleNode.materialId}"
              data-parent-id="#{articleNode.parentId}"
              data-material-type="#{articleNode.type}"
              data-material-title="#{articleNode.title}"
              data-assignment-type="#{articleNode.assignmentType}"
              class="workspace-materials-view-page material-management-view folder #{articleNode.hidden ? 'item-hidden' : ''} #{node.hidden ? 'parent-hidden' : ''}"></h2>
          </ui:fragment>

          <ui:fragment rendered="#{articleNode.type ne 'folder'}">
            <section id="page-#{articleNode.workspaceMaterialId}"
              data-workspace-material-id="#{articleNode.workspaceMaterialId}"
              data-material-id="#{articleNode.materialId}"
              data-parent-id="#{articleNode.parentId}"
              data-material-type="#{articleNode.type}"
              data-material-title="#{articleNode.title}"
              data-material-content="#{articleNode.html}"
              data-material-current-revision="#{articleNode.currentRevision}"
              data-material-published-revision="#{articleNode.publishedRevision}"
              data-assignment-type="#{articleNode.assignmentType}"
              class="workspace-materials-view-page material-management-view #{articleNode.hidden ? 'item-hidden' : ''} #{node.hidden ? 'parent-hidden' : ''}" />
          </ui:fragment>

          <div class="workspace-materials-management-add">
            <span class="workspace-materials-management-line-separator"></span><a
              class="workspaces-materials-management-add icon-add" href="javascript:void(null)"><span>#{i18n.text['plugin.workspace.materialsManagement.add']}</span></a>
          </div>
          <div class="workspaces-materials-management-insert-file">
            <input type="file" />
          </div>
        </ui:repeat>
      </ui:fragment>

      <ui:fragment rendered="#{node.type ne 'folder'}">
        <section id="page-#{node.workspaceMaterialId}"
          data-workspace-material-id="#{node.workspaceMaterialId}"
          data-material-id="#{node.materialId}"
          data-parent-id="#{node.parentId}"
          data-material-type="#{node.type}"
          data-material-title="#{node.title}"
          data-material-content="#{node.html}"
          data-material-current-revision="#{node.currentRevision}"
          data-material-published-revision="#{node.publishedRevision}"
          data-assignment-type="#{node.assignmentType}"
          class="workspace-materials-view-page material-management-view #{node.hidden ? 'item-hidden' : ''}" />
        <div class="workspace-materials-management-add">
          <span class="workspace-materials-management-line-separator"></span><a
            class="workspaces-materials-management-add icon-add" href="javascript:void(null)"><span>#{i18n.text['plugin.workspace.materialsManagement.add']}</span></a>
        </div>
        <div class="workspaces-materials-management-insert-file">
          <input type="file" />
        </div>
      </ui:fragment>
    </ui:repeat>

    <input class="workspaceEntityId" type="hidden" value="#{workspaceHelpPageManagementBackingBean.workspaceEntityId}" />
  </ui:define>

</ui:composition>
