<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" template="/settings/template.xhtml">
  
  <ui:define name="content.center">
   <div class="se-container se-workspacetypes"> 
    <h3>Muikku Workspace Types</h3>
  
    <h:dataTable id="workspacetypes-table" value="#{workspaceTypesSettingsViewBackingBean.workspaceTypeEntities}" var="workspaceTypeEntity" style="width:100%">
      <f:facet name="header">
        <h:outputText value="All Workspace Types" />
      </f:facet>
      
      <h:column>
        <f:facet name="header">
          <h:outputText value="Name" />
        </f:facet>
        <h:outputLink value="#{request.contextPath}/settings/workspace/type/#{workspaceTypeEntity.id}">
          <h:outputText value="#{workspaceTypeEntity.name}" />
        </h:outputLink>
      </h:column>
      
      <f:facet name="footer">
        <h:outputText value="Count: #{workspaceTypesSettingsViewBackingBean.workspaceTypeEntities.size()}" />
      </f:facet>
      
    </h:dataTable>
    
    <br/>
    <h3>Workspace Types for School Data</h3>

    <h:panelGroup layout="block" id="workspaceTypesContainer">
      <h:form>
        <h:dataTable id="workspacetypes-table" value="#{workspaceTypesSettingsViewBackingBean.workspaceTypes}" var="workspaceType" style="width:100%">
          <f:facet name="header">
            <h:outputText value="All Workspace Types" />
          </f:facet>
          
          <h:column>
            <f:facet name="header">
              <h:outputText value="Data Source" />
            </f:facet>
            <h:outputText value="#{workspaceType.schoolDataSource}" />
          </h:column>
          
          <h:column>
            <f:facet name="header">
              <h:outputText value="Identifier" />
            </f:facet>
            <h:outputText value="#{workspaceType.identifier}" />
          </h:column>
          
          <h:column>
            <f:facet name="header">
              <h:outputText value="Name" />
            </f:facet>
            <h:outputText value="#{workspaceType.name}" />
          </h:column>
          
          <h:column>
            <f:facet name="header">
              <h:outputText value="Muikku Workspace Type" />
            </f:facet>
            
            <h:selectOneMenu value="#{workspaceType.workspaceEntityId}" >
              <f:selectItems value="#{workspaceTypesSettingsViewBackingBean.workspaceTypeEntitySelectItems}"/>
            </h:selectOneMenu>
          </h:column>
          
          <f:facet name="footer">
            <h:outputText value="Count: #{workspaceTypesSettingsViewBackingBean.workspaceTypes.size()}" />
          </f:facet>
        </h:dataTable>
        
        <h:commandButton action="#{workspaceTypesSettingsViewBackingBean.saveWorkspaceTypes}" value="Save"/>
          
      </h:form>
    </h:panelGroup>
    </div>
  </ui:define>

</ui:composition>
