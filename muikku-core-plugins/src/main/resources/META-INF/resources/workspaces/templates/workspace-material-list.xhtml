<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:c="http://java.sun.com/jsp/jstl/core" 
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
  xmlns:composite="http://java.sun.com/jsf/composite/composite">
  
  <c:forEach var="node" items="#{nodes}">
    <c:choose>
      <c:when test="#{node.materialType eq 'folder'}">
        <ul class="workspace-materials-toc-section">
          <li class="workspace-materials-toc-subtitle">#{node.materialTitle}</li>
          <ui:include src="/workspaces/templates/workspace-material-list.xhtml">
            <ui:param name="nodes" value="#{workspaceMaterialsBackingBean.getMaterialNodes(node)}" />
          </ui:include>
        </ul>
      </c:when>
      <c:otherwise>
        <li class="workspace-materials-toc-item">
          <h:outputLink value="#page-#{node.materialId}">#{node.materialTitle}</h:outputLink>
        </li>
      </c:otherwise>
    </c:choose>
  </c:forEach>

</ui:composition>