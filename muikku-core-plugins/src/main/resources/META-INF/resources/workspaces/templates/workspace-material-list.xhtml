<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:c="http://java.sun.com/jsp/jstl/core" 
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
  xmlns:composite="http://java.sun.com/jsf/composite/composite">
  
  <c:forEach var="node" items="#{nodes}">
    <c:choose>
      <c:when test="#{node.type eq 'FOLDER'}">
        <h:panelGroup layout="block" styleClass="workspace-materials-toc-section">
          <div class="workspace-materials-toc-subtitle">#{node.title}</div>
          <ui:include src="/workspaces/templates/workspace-material-list.xhtml">
            <ui:param name="nodes" value="#{workspaceMaterialsBackingBean.listWorkspaceNodes(node)}" />
          </ui:include>
        </h:panelGroup>
      </c:when>
      <c:when test="#{node.type eq 'MATERIAL'}">
        <div class="workspace-materials-toc-item">
          <h:outputLink value="#{request.contextPath}/workspace/#{workspaceMaterialsBackingBean.workspaceUrlName}/materials/#{node.path}">#{node.material.title}</h:outputLink>
        </div>
      </c:when>
    </c:choose>
  </c:forEach>

</ui:composition>