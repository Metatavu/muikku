<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:c="http://java.sun.com/jsp/jstl/core" 
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
  xmlns:composite="http://java.sun.com/jsf/composite/composite" 
  template="/workspaces/templates/workspace-materials-reading-view.xhtml">

  <ui:define name="viewScripts">
    <!-- TODO: plugins should be able to introduce new material editors -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/ckeditor/4.3.2/ckeditor.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/jshash/2.2/md5-min.js"></script> 
    <h:outputScript name="scripts/coopsck/coopsck.js" />
    <h:outputScript name="scripts/diffxml-js/diffxml-js.js" />

    <h:outputScript name="scripts/gui/workspace.js"/> 
    <h:outputScript name="scripts/gui/workspace-materials-management.js" />
  </ui:define>
  
  <ui:define name="workspaces.reading.toc">
    <div id="workspaceMaterialReadingTOCWrapper">
      <nav id="workspaceMaterialReadingTOCClosed">
        <div class="workspace-material-reading-TOC-title">
          <div id="workspaceMaterialReadingTOCNavicon" class="icon-navicon workspace-material-reading-toc-opening-button"></div>
        </div>
      </nav>
    
      <nav id="workspaceMaterialReadingTOCOpen">
        <div class="workspace-material-reading-TOC-title">
          <h1>Sis√§llysluettelo</h1>
          <div id="workspaceMaterialReadingTOCPinicon" class="icon-pin"></div>
          <div id="workspaceMaterialReadingTOCNavicon" class="icon-navicon workspace-material-reading-toc-closing-button"></div>
        </div>
        <div class="workspace-materials-toc-content-outer">
          <div class="workspace-materials-toc-content-inner">
            <div class="workspace-materials-toc-content-scrolling">
              <ui:include src="/workspaces/templates/workspace-material-list.xhtml">
                <ui:param name="nodes" value="#{workspaceMaterialsTOCBackingBean.getMaterialNodes(workspaceMaterialsManagementBackingBean.getRootFolder())}"/>
              </ui:include>
              <div class="spacer"></div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </ui:define>

  <ui:define name="workspace.reading.content">
    <ui:repeat var="node" value="#{workspaceMaterialsTOCBackingBean.getAllMaterialNodes(workspaceMaterialsManagementBackingBean.getRootFolder())}">
      <section id="page-#{node.materialId}" data-material-id="#{node.materialId}" data-material-type="#{node.materialType}" data-material-title="#{node.materialTitle}" class="workspace-material-reading-view-page"/>
    </ui:repeat>
  </ui:define>
  
  <ui:define name="workspaces.reading.goback">
    <div id="workspaceMaterialReadingAdditionalNavWrapper">
      <nav class="workspaceMaterialReadingAdditionalNav">
        <m:widgetSpaceSet>
          <m:widgetSpace name="workspaces.materials.reading.dock" keepEmpty="true" sizing="MINIMIZE" styleClass="">
            <m:widget name="workspaces-materials-reading-goback" size="1" />
          </m:widgetSpace>
        </m:widgetSpaceSet>
      </nav>
    </div>
  </ui:define>

</ui:composition>
