<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
  xmlns:composite="http://java.sun.com/jsf/composite/composite" 
  template="/workspaces/templates/workspace-materials-view.xhtml">

  <ui:define name="workspace.content.top.static">
 
  </ui:define>
  
  <ui:define name="workspace.content">
  
    <div id="workspaceEvaluateWrapper">
      <div class="ask-to-evaluate-workspace-button">
        <div class="evaluate-workspace-title">Arviointipyyntö</div>
        <div class="evaluate-workspace-desc">Lähetä kurssista arviontipyyntö</div>
      </div>
      
      <div class="cancel-evaluate-workspace-button" style="display:none;">
        <div class="evaluate-workspace-title">Peruuta arviointipyyntö</div>
        <div class="evaluate-workspace-desc">Peruuta kurssin arviontipyyntö</div>
      </div>
    </div>

    <nav class="workspace-materials-toc-wrapper" id="workspaceMaterialsTOCWrapper">
      <div class="workspace-materials-toc-container">
        <h1 class="workspace-materials-toc-title">#{i18n.text['plugin.workspace.materials.tocTitle']}</h1>
        <div class="workspace-materials-toc-content-outer">
          <div class="workspace-materials-toc-content-inner">
            <div class="workspace-materials-toc-content-scrolling">
              <ul class="workspace-materials-toc-root">
                <ui:include src="/workspaces/templates/workspace-materials-list.xhtml">
                  <ui:param name="nodes" value="#{workspaceMaterialsTOCBackingBean.getVisibleChildren(workspaceMaterialsBackingBean.getRootFolder())}"/>
                  <ui:param name="includeHidden" value="false"/>
                </ui:include>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
    
    <article>
      <h1>#{workspaceMaterialsBackingBean.workspaceName}</h1>
      <ui:repeat var="node" value="#{workspaceMaterialsBackingBean.contentNodes}">
        <ui:fragment rendered="#{node.type eq 'folder'}">
          <section id="page-#{node.workspaceMaterialId}" class="workspace-materials-view-page-section material-view" data-workspace-material-id="#{node.workspaceMaterialId}" data-material-id="#{node.materialId}" data-material-type="#{node.type}" data-material-title="#{node.title}">
            <h2>#{node.title}</h2>
            <ui:repeat var="articleNode" value="#{node.children}">
              <ui:fragment rendered="#{articleNode.type eq 'folder'}">
                <ui:fragment rendered="#{articleNode.level eq 1}">
                  <h3>#{articleNode.title}</h3>
                </ui:fragment>
                <ui:fragment rendered="#{articleNode.level eq 2}">
                  <h4>#{articleNode.title}</h4>
                </ui:fragment>
                <ui:fragment rendered="#{articleNode.level eq 3}">
                  <h5>#{articleNode.title}</h5>
                </ui:fragment>
                <ui:fragment rendered="#{(articleNode.level eq 4) or (articleNode.level gt 4)}">
                  <h6>#{articleNode.title}</h6>
                </ui:fragment>
              </ui:fragment>
              <ui:fragment rendered="#{articleNode.type ne 'folder'}">
                <article id="page-#{articleNode.workspaceMaterialId}" data-workspace-material-assigment-type="#{articleNode.assignmentType}" data-workspace-material-id="#{articleNode.workspaceMaterialId}" data-material-id="#{articleNode.materialId}" data-material-type="#{articleNode.type}" data-material-title="#{articleNode.title}" class="workspace-materials-view-page material-view"/>
              </ui:fragment>
            </ui:repeat>
          </section>
        </ui:fragment>  
        
        <ui:fragment rendered="#{node.type ne 'folder'}">
          <article id="page-#{node.workspaceMaterialId}" data-workspace-material-assigment-type="#{node.assignmentType}" data-workspace-material-id="#{node.workspaceMaterialId}" data-material-id="#{node.materialId}" data-material-type="#{node.type}" data-material-title="#{node.title}" class="workspace-materials-view-page material-view"/>
        </ui:fragment>  
      </ui:repeat>
    </article>

    <input class="workspaceEntityId" type="hidden" value="#{workspaceMaterialsBackingBean.workspaceEntityId}"/>
  </ui:define>

</ui:composition>
