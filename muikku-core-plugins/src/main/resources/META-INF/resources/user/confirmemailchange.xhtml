<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    template="/WEB-INF/templates/main-view.xhtml">
    
    
    <ui:define name="content.center.widget">
      <h:outputScript name="scripts/jshash/md5-min.js" target="head"/>
      <div class="ps-changeMail co-widget">
      <div class="ps-changeMail-form-container">
	      <p>Confirm new email address #{confirmEmailChangeBackingBean.pendingEmailChange.newEmail}.</p>
	      
	      <h:form id="confirmEmailChange">
	        <h:inputHidden value="${confirmEmailChangeBackingBean.confirmationHash}" />
	        
	        <ui:fragment rendered="#{!muikkuSession.loggedIn}">
	          Username:
	          <h:inputText value="#{confirmEmailChangeBackingBean.userName}" />
	        </ui:fragment>
	        
	        Password:
	        <h:inputSecret id="pwd" value="#{confirmEmailChangeBackingBean.passwordHash}" />
	        
	        <h:commandButton onclick="$('#confirmEmailChange\\:pwd').val(hex_md5($('#confirmEmailChange\\:pwd').val())); return true;" action="#{confirmEmailChangeBackingBean.confirm()}" value="Confirm" />
	      </h:form>
        </div>
      </div>
    </ui:define>

</ui:composition>
