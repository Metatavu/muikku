<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    template="/WEB-INF/templates/default.xhtml">
    
    <ui:define name="content.center.widget">
      <div class="showUserName">
        #{userIndexBackingBean.user.firstName} #{userIndexBackingBean.user.lastName}
      </div>

      <div class="showUserPicture">
        <c:choose>
          <c:when test="#{User.hasPicture(userIndexBackingBean.userEntity)}">
            <img src="#{request.contextPath}/picture?userId=#{userIndexBackingBean.userEntity.id}" />
          </c:when>
          <c:otherwise>
            <img src="#{request.contextPath}/themes/default/gfx/fish.jpg" />
          </c:otherwise>
        </c:choose>
      </div>
      
      <div class="">
        <form method="post" action="#{request.contextPath}/pictureupload" enctype="multipart/form-data">
          <input type="file" name="pictureFile"/><br/>
          <input type="hidden" name="userId" value="#{userIndexBackingBean.userEntity.id}"/>
          <input type="submit" value="Paivita kuva"/>
        </form>
      </div>
      
      <div class="userContacts">
        <c:forEach var="contact" items="#{User.listUserContacts(userIndexBackingBean.userEntity)}">
          <c:choose>
            <c:when test="#{contact.type eq 'PHONE'}">
              <div class="userContact">Phone: #{contact.value}</div>
            </c:when>
            <c:when test="#{contact.type eq 'SKYPE'}">
              <div class="userContact">Skype: <a href="skype:#{contact.value}?call">#{contact.value}</a></div>
            </c:when>
            <c:when test="#{contact.type eq 'MSN'}">
              <div class="userContact">MSN: #{contact.value}</div>
            </c:when>
            <c:when test="#{contact.type eq 'GTALK'}">
              <div class="userContact">GTalk: #{contact.value}</div>
            </c:when>
          </c:choose>
        </c:forEach>
      </div>

<!--       <div class=""> -->
<!--         <h:form> -->
<!--           <div class="formElementRow"> -->
<!--             <h:commandLink action="#{Friend.createFriendRequest(userIndexBackingBean.userEntity, 'B mi frnd')}" value="Add friend"/> -->
<!--           </div> -->
<!--         </h:form> -->
<!--       </div> -->

<!--       <m:widget name="representuser-button"> -->
<!--         <ui:param name="userId" value="#{userIndexBackingBean.userEntity.id}" /> -->
<!--       </m:widget> -->

      <div class="showUserWall">
        <ui:include src="/wall/userwall.xhtml">
          <ui:param name="userId" value="#{userIndexBackingBean.userEntity.id}" />
        </ui:include>
      </div>
    </ui:define>

</ui:composition>
