<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="template.xhtml">
    
  <ui:define name="content.center.widget">


   <ui:define name="content.tools.top.left">       
   </ui:define> 

   <ui:define name="content.tools.top.center">            
   </ui:define> 

  
  <ui:define name="content.left.widget"> 
  </ui:define>



    <div class="st-content-student">
      <div class="st-content-student-info grid_24 nomargin noLid">
        <div class="grid_6 alpha noLid">
          <div class="st-content-student-info-user">

            <h3>${studentViewBackingBean.user.firstName} ${studentViewBackingBean.user.lastName}</h3>

            <c:choose>
              <c:when test="#{User.hasPicture(studentViewBackingBean.userEntity)}">
                <img src="#{request.contextPath}/picture?userId=#{studentViewBackingBean.userEntity.id}" />
              </c:when>
              <c:otherwise>
                <img src="#{request.contextPath}/themes/default/gfx/fish.jpg" />
              </c:otherwise>
            </c:choose>
          </div>
          <div class="st-content-student-info-actions">
            <m:widget name="user-instance-action-message" rendered="#{sessionBackingBean.loggedIn}" />
            <m:widget name="user-instance-action-profile" rendered="#{sessionBackingBean.loggedIn}" />
            <div class="clear"></div>
          </div>
        </div>
        <div class="grid_18 omega noLid">
          <div class="st-content-student-info-details">
            <span class="st-info-details-lastLogin">
              Kirjautunut viimeksi: 
              <h:outputText value="#{studentViewBackingBean.userEntity.lastLogin}">
                <f:convertDateTime pattern="d.M.yyyy" />
              </h:outputText>
            </span>
            <span class="st-info-details-latestStudy">Viimeisin suoritettu opinto: dd/mm/yyyy</span>
            <span class="st-info-details-latestTask">Viimeisin tehtävä: dd/mm/yyyy</span> 
            <span class="st-info-details-achievements">Suoritusmäärät: 123566</span>
          </div>
          <div class="st-content-student-info-contacts">
            <span class="st-info-user-contact">Yhteyshenkilö</span> <span class="st-info-user-contact">Yhteyshenkilö</span> <span class="st-info-user-contact">Yhteyshenkilö</span>
            <span class="st-info-user-contact">Yhteyshenkilö</span> <span class="st-info-user-contact">Yhteyshenkilö</span>
          </div>
          <div class="st-content-student-info-headlines">
            <span class="st-info-details-timeLeft ">Opiskeluaikaa jäljellä: 123 päivää </span>
          </div>
        </div>
      </div>

      <div class="clear"></div>
      <div class="grid_24 nomargin">

        <div id="studentTabs">
          <ul>
            <li><a href="#studentTab-1">Opiskeluprofiili</a></li>
            <li><a href="#studentTab-2">Opiskelutapahtumat</a></li>

            <ui:fragment rendered="#{muikkuSession.hasEnvironmentPermission('MANAGE_STUDENTS_VIEW_STUDENT_STUDYPLAN')}">
              <li><a href="#studentTab-3">HOPS</a></li>
            </ui:fragment>
            
            <ui:fragment rendered="#{muikkuSession.hasEnvironmentPermission('MANAGE_STUDENTS_VIEW_STUDENT_CREDITS')}">
              <li><a href="#studentTab-4">Suoritusrekisteri</a></li>
            </ui:fragment>
          </ul>
          
          <div id="studentTab-1" class="container_24 tabContent">
            <div class="grid_24 nomargin noLid">
              <div class="st-content-student-tabs">
                <div class="grid_24">
                  <div class="st-content-timeline">
                    <iframe src='http://cdn.knightlab.com/libs/timeline/latest/embed/index.html?source=0Aic1yNyiWpsjdHlGLUEzeTkwNzhLNWdKdW5uQXJDNlE'
                      width='100%' height='500' frameborder='0'></iframe>
                  </div>
                </div>


                <div class="grid_12 ">
                  <div class="st-content-guidanceLog">
                    <ui:include src="/facelets/widget-toolarea.xhtml" />
                    <h3>Opiskelutapahtumat</h3>
                    <div class="st-content-guidanceLog-item" style="border: 1px solid #ededed; margin-top: 5px;">
                      <div class="st-content-guidanceLog-item-phone">
                        <h:outputLink styleClass="studentLink tooltip" value="">Puhelu</h:outputLink>
                      </div>
                      <div class="st-content-guidanceLog-item-message">
                        <h:outputLink styleClass="studentLink tooltip" value="">viesti</h:outputLink>
                      </div>
                      <div class="st-content-guidanceLog-item-evaluation">
                        <h:outputLink styleClass="studentLink tooltip" value="">arviointi</h:outputLink>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="grid_12">
                  <div class="st-content-wallfeed">
                 
                    <ui:include src="/facelets/widget-toolarea.xhtml" />
                    <h3>Opiskelijan seinämä</h3>

                    <ui:include src="/wall/userwall.xhtml">
                      <ui:param name="userId" value="#{studentViewBackingBean.userEntity.id}" />
                    </ui:include>
                  
<!--                     <div class="st-content-wallfeed-item" style="border: 1px solid #ededed; margin-top: 5px;"> -->
<!--                       <div class="st-content-wallfeed-item-evaluationRequest"> -->
<!--                         <h:outputLink styleClass="studentLink tooltip" value="">Arviointipyyntö</h:outputLink> -->
<!--                       </div> -->
<!--                       <div class="st-content-wallfeed-item-message"> -->
<!--                         <h:outputLink styleClass="studentLink tooltip" value="">viesti</h:outputLink> -->
<!--                       </div> -->
<!--                       <div class="st-content-wallfeed-item-course"> -->
<!--                         <h:outputLink styleClass="studentLink tooltip" value="">Kurssi</h:outputLink> -->
<!--                       </div> -->
<!--                     </div> -->
                  </div>
                </div>
                <div class="clear"></div>
              </div>
            </div>
            <div class="clear"></div>
          </div>
          <div id="studentTab-2">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna
            aliquam erat volutpat.</div>
          <ui:fragment rendered="#{muikkuSession.hasEnvironmentPermission('MANAGE_STUDENTS_STUDYPLAN_VIEW')}">
            <div id="studentTab-3">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna
              aliquam erat volutpat.</div>
          </ui:fragment>
          <ui:fragment rendered="#{muikkuSession.hasEnvironmentPermission('MANAGE_STUDENTS_CREDITS_VIEW')}">
            <div id="studentTab-4">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna
              aliquam erat volutpat.</div>
          </ui:fragment>
        </div>


      </div>

    </div>

    <script>
    $( "#studentTabs" ).tabs();
  </script>
  </ui:define>

</ui:composition>
