<?xml version="1.0" encoding="UTF-8"?>
<ui:composition 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:m="http://www.ofw.fi/xml/2013/muikku/components-taglib.xsd">

  <ui:fragment rendered="#{widgetsBackingBean.hasWidgets(location)}">
    <div class="widgetSpace">
      <m:includeWidgets widgets="#{widgetsBackingBean.getWidgets(location)}"/>
      <div class="clear"/>
    </div>
  </ui:fragment>

  <ui:fragment rendered="#{!widgetsBackingBean.hasWidgets(location)}"> 
    <c:forEach var="sublocation" items="#{sublocations}">
      <div class="widgetSpace">
        <m:includeWidgets widgets="#{widgetsBackingBean.getWidgets(location, sublocation)}"/>
        <div class="clear"/>
      </div>
    </c:forEach>
  </ui:fragment>

</ui:composition>
