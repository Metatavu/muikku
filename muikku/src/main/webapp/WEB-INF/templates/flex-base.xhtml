<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:jsf="http://xmlns.jcp.org/jsf"
  xmlns:ui="http://java.sun.com/jsf/facelets">

  <f:view locale="#{muikkuSession.locale}">
  
    <head>
      <ui:insert name="title"></ui:insert>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta http-equiv="x-ua-compatible" content="ie=edge" />
      <meta content="width=device-width, initial-scale=1.0, minimun-scale=1" name="viewport" />
      <ui:insert name="meta"></ui:insert>
      <script type="text/javascript">
          var CONTEXTPATH = "#{request.contextPath}";
          var MUIKKU_LOGGED_USER_ID = parseInt('#{sessionBackingBean.loggedUserId}')||null;
          var MUIKKU_LOGGED_USER = '#{sessionBackingBean.loggedUser}'||null;
          var MUIKKU_LOGGEDIN = #{muikkuSession.loggedIn};
          var MUIKKU_LOGGEDINROLES = {
            teacher: #{sessionBackingBean.teacherLoggedIn},
            manager: #{sessionBackingBean.managerLoggedIn},
            admin: #{sessionBackingBean.administratorLoggedIn},
            student: #{sessionBackingBean.studentLoggedIn}
          };
      </script>
      
      <ui:fragment rendered="#{sessionBackingBean.bugsnagEnabled}">
        <script async="async" defer="defer" src="//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js" data-apikey="#{sessionBackingBean.bugsnagApiKey}"></script>
      </ui:fragment>
      
      <!-- jQuery -->
      <script async="async" defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery/2.1.3/jquery.min.js"/>
      
      <!-- jQuery UI -->
      <script async="async" defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jqueryui/1.11.2/jquery-ui.min.js"/>
      
      <!--  jQuery Touch Punch or jQuery Mobile? -->
      <script async="async" defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"/>
      
      <ui:fragment rendered="#{sessionBackingBean.testsRunning}"> 
        <script async="async" defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery-simulate/1.0.1/jquery.simulate.js"></script>
        <script async="async" defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery-simulate-ext/1.3.0/jquery.simulate.ext.js"></script>
        <script async="async" defer="defer" type="text/javascript" src="//cdn.muikkuverkko.fi/libs/jquery-simulate-ext/1.3.0/jquery.simulate.drag-n-drop.js"></script>
      </ui:fragment>
      
      <script async="async" defer="defer" jsf:name="scripts/debug.js" jsf:rendered="#{sessionBackingBean.testsRunning}"/>
      
      <!-- Notification Queue -->
      <script async="async" defer="defer" jsf:name="scripts/notificationqueue/notificationqueue.js"/>

      <!-- Websocket -->
      <script async="async" defer="defer" jsf:name="scripts/gui/websocket.js"/>

      <!-- Heartbeat -->
      <script async="async" defer="defer" jsf:name="scripts/gui/heartbeat.js"/>

      <ui:insert name="scripts"></ui:insert>

      <!-- Flex Grid -->
      <link rel="stylesheet" type="text/css" href="//cdn.muikkuverkko.fi/libs/fni-flexgrid/1.0.0/flexgrid.css"/>
      <link rel="stylesheet" type="text/css" href="/icons/icomoon/icons.css"/>
      <ui:insert name="styles"></ui:insert>
    </head>
  
    <body>
      <ui:insert name="body"></ui:insert>
    </body>
  
  </f:view>
</html>
