<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:h="http://java.sun.com/jsf/html">
    
    <ui:fragment rendered="#{muikkuSession.loggedIn}">
      <div id="userProfileWidget" class="widget userProfileWidget">
            <div id="loggedUser">
               <h:form id="userProfileForm">

				<div id="userProfileWidgetInfo">
					<c:if test="#{muikkuSession.loggedIn}">
						<div id="userIsSelfIndicator">#{User.findUser(muikkuSession.user).firstName}
							#{User.findUser(muikkuSession.user).lastName}</div>
					</c:if>
					<c:if test="#{localSession.representing}">
						<div id="userIsRepresentingIndicator">#{User.findUser(localSession.loggedUser).firstName}
							#{User.findUser(localSession.loggedUser).lastName}</div>
						<span> <h:form>
								<h:commandLink value="#{msg.endRepresentation}"
									action="#{localSession.endRepresentation()}" />
							</h:form>
						</span>
					</c:if>
					<c:if test="#{muikkuSession.loggedIn}">
						<span> <h:commandLink value="#{msg.logOut}"
								action="#{muikkuSession.logout()}" />
						</span>
					</c:if>
				</div>
                <div id="userProfileWidgetPicture">
                  <div class="tempUserProfileWidgetPicture"></div>
                </div>			
                <div class="footer"></div>	
                <div id="userProfileNavigationContainer">
                  <h:commandLink action="#{muikkuSession.logout()}" styleClass="naviIconLogout" />
                  <h:link outcome="/user.jsf" styleClass="naviIconSettings"/>
                </div>
			</h:form>
            </div>
      </div>
    </ui:fragment>
    
</ui:composition>
